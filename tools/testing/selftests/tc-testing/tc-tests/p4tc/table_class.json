[
    {
        "id": "60b7",
        "name": "Create valid table class",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a540",
        "name": "Create valid table class without preactions",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 2,
                                    "bind": 1
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "4765",
        "name": "Try to create table class without name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/ keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "3d3c",
        "name": "Try to create table class without keysz",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8b54",
        "name": "Try to create table class without tcount",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b48a",
        "name": "Try to create table class with keysz zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 0 tcount 0 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "cc89",
        "name": "Try to create table class with keysz > P4TC_MAX_KEYSZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 129 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "c3d4",
        "name": "Try to create table class with tcount zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 0 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "05fc",
        "name": "Try to create table class with tcount > P4TC_MAX_TINSTS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 513 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "9678",
        "name": "Create table class with tcount = P4TC_MAX_TINSTS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 512 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 512,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "efba",
        "name": "Try to create table class with tentries > P4TC_MAX_TENTRIES",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 256 tentries 16777217 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a24a",
        "name": "Create table class with tentries = P4TC_MAX_TENTRIES",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 tentries 16777216 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 16777216,
                        "masks": 8,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "67b7",
        "name": "Try to create table class with tentries zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 256 tentries 0 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "e8e8",
        "name": "Try to create table class with nummasks > P4TC_MAX_TMASKS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 256 tmasks 129 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6b5b",
        "name": "Create table class wth nummasks = P4TC_MAX_TMASKS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 nummasks 128 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 128,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "615c",
        "name": "Try to create table class with nummasks zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 256 nummasks 0 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ef97",
        "name": "Create table class with specific tt_id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 42,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "7a0f",
        "name": "Try to create table class same name twice",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 1 preactions gact index 4 postactions gact index 2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "bd8d",
        "name": "Try to create table class same id twice",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname2 tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 1 preactions gact index 4 postactions gact index 2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "eeaf",
        "name": "Try to create table class without supplying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ tbcid 1 keysz 16 tcount 513 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "f35d",
        "name": "Try to create table class without supplying keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 256 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b3c9",
        "name": "Try to create table class with name size > TCLASSNAMSIZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/7eozFYyaqVCD7H0xS3M5sMnluUqPgZewfSLnYPf4s3k0lbx8lKoR32zSqiGsh84qJ32vnLPdl7f2XcUh5yIdEP7uJy2C3iPtyU7159s9CMB0EtTAlWTVz4U1jkQ5h2advwp3KCVsZ1jlGgStoJL2op5ZxoThTSUQLR61a5RNDovoSFcq86Brh6oW9DSmTbN6SYygbG3JLnEHzRC5hh0jGmJKHq5ivBK9Y9FlNZQXC9wVwX4qTFAd8ITUTj2Au2Jg1 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "f3a5",
        "name": "Try to create table class with invalid action",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname2 keysz 16 tcount 1 keys id 1 action connmark zone 103 reclassify index 1 action connmark goto chain 42 index 90 cookie c1a0c1a0 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b3ec",
        "name": "Try to create table class with invalid action index",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname2 keysz 16 tcount 1 keys id 1 action connmark zone 103 reclassify index 1 action connmark goto chain 42 index 90 cookie c1a0c1a0 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "40b0",
        "name": "Create table class with tbcid of 4 bytes",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 2",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 2147483647 keysz 16 tcount 1 keys id 1 action gact index 1 preactions gact index 4 postactions gact index 2",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 2147483647",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tbcid": 2147483647,
                        "tname": "cb/tname"
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "af62",
        "name": "Create valid table class with more than one key",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pipe index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 keys id 2 default action gact index 5 keys action gact index 6 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 2,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pipe"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 5,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            },
                            {
                                "id": 3,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 6,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "0d47",
        "name": "Try to create table class with more than one default key",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pipe index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys default id 1 action gact index 3 keys id 2 default action gact index 5 keys action gact index 6 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "4cb8",
        "name": "Create valid table class with P4TC_MAXPARSE_KEYS keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 3,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 4,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 5,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 6,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 7,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 8,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 9,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 10,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 11,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 12,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 13,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 14,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 15,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 16,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6fc2",
        "name": "Create valid table class with P4TC_MAXPARSE_KEYS + 1 keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "eea7",
        "name": "Update table class's key size specifying table class name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keysz 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 32,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "5d07",
        "name": "Update table class's key size specifying table class id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ pipeid 22 tbcid 22 keysz 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 32,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "46f5",
        "name": "Try to update table class's key size with zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keysz 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8306",
        "name": "Try to update table class's key size with > P4TC_MAX_KEYSZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keysz 129",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "0d12",
        "name": "Update table class's with key size = P4TC_MAX_KEYSZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keysz 128",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 128,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b2ce",
        "name": "Update table class tcount by name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname tcount 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 32,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "22c5",
        "name": "Update table class tcount by id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tcount 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 32,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "fd12",
        "name": "Try to update table class tcount with zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tcount 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b7c6",
        "name": "Try to update table class wth tcount > P4TC_MAX_TINSTS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tcount 513",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "cadf",
        "name": "Update table class wth tcount = P4TC_MAX_TINSTS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tcount 512",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 512,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "67c0",
        "name": "Try to update table class tentries with zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tentries 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "dfd1",
        "name": "Try to update table class wth tentries > P4TC_MAX_TENTRIES",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tentries 16777217",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "36e3",
        "name": "Update table class with tentries = P4TC_MAX_TENTRIES",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 tentries 16777216",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 16777216,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "5c80",
        "name": "Try to update table class masks with zero",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 nummasks 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "011b",
        "name": "Try to update table class with nummasks > P4TC_MAX_TMASKS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 nummasks 129",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "102b",
        "name": "Update table class with nummasks = P4TC_MAX_TMASKS",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 nummasks 128",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 128,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ac3d",
        "name": "Update table class's postaction",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 postactions gact index 5",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 2,
                                    "bind": 1
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 5,
                                    "ref": 2,
                                    "bind": 1
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "64e5",
        "name": "Update table class's postaction and check old actions ref count and bind",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 postactions gact index 5",
        "expExitCode": "0",
        "verifyCmd": "$TC -j actions get action gact index 4",
        "matchCount": "1",
        "matchJSON": [
            {
                "total acts": 0
            },
            {
                "actions": [
                    {
                        "kind": "gact",
                        "index": 4,
                        "ref": 2,
                        "bind": 1
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b886",
        "name": "Update table class and add new key",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keys id 1 action gact index 5 keys id 2 action gact index 6",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "reclassify"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 5,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "drop"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 6,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "4df0",
        "name": "Update table class and add new key without specifying id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keys action gact index 6",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "drop"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 6,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "80c9",
        "name": "Update table class's keys and check old keys's action reference",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keys id 1 action gact index 5 keys id 2 action gact index 6",
        "expExitCode": "0",
        "verifyCmd": "$TC -j actions get action gact index 3",
        "matchCount": "1",
        "matchJSON": [
            {
                "total acts": 0
            },
            {
                "actions": [
                    {
                        "kind": "gact",
                        "index": 3,
                        "ref": 1,
                        "bind": 0
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ef19",
        "name": "Update table class's postactions and keysz with invalid value",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keysz 0 keys id 1 action gact index 5 keys id 2 action gact index 6",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8921",
        "name": "Update table class's keys and keysz with invalid value and check actions after",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/ tbcid 22 keysz 0 keys id 1 action gact index 5 keys id 2 action gact index 6",
        "expExitCode": "255",
        "verifyCmd": "$TC -j actions ls action gact",
        "matchCount": "1",
        "matchJSON": [
            {
                "total acts": 6
            },
            {
                "actions": [
                    {
                        "kind": "gact",
                        "index": 1,
                        "ref": 2,
                        "bind": 1
                    },
                    {
                        "kind": "gact",
                        "index": 2,
                        "ref": 2,
                        "bind": 1
                    },
                    {
                        "kind": "gact",
                        "index": 3,
                        "ref": 2,
                        "bind": 1
                    },
                    {
                        "kind": "gact",
                        "index": 4,
                        "ref": 3,
                        "bind": 2
                    },
                    {
                        "kind": "gact",
                        "index": 5,
                        "ref": 1,
                        "bind": 0
                    },
                    {
                        "kind": "gact",
                        "index": 6,
                        "ref": 1,
                        "bind": 0
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "1fdd",
        "name": "Update table class with P4TC_MAXPARSE_KEYS keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 3,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 4,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 5,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 6,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 7,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 8,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 9,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 10,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 11,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 12,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 13,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 14,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 15,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            },
                            {
                                "id": 16,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 17,
                                        "bind": 16
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a44e",
        "name": "Try to update table class adding more P4TC_MAXPARSE_KEYS keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3 keys action gact index 3",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "74ec",
        "name": "Try to update table class without supplying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 5",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 6",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ tbcid 22 keys id 1 action gact index 5 keys id 2 action gact index 6",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a7f3",
        "name": "Delete table class by name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ptables/cb/tname",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "9524",
        "name": "Delete table class by id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ptables/ tbcid 22",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchPattern": "Error: Unable to find table class by id.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "c41b",
        "name": "Try to delete inexistent table class by name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ptables/cb/tname2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "faca",
        "name": "Try to delete inexistent table class by id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ptables/ tbcid 44",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6da7",
        "name": "Try to delete table class without supplying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ tbcid 22",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/ tbcid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a844",
        "name": "Flush table class",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/ptables/",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "7f88",
        "name": "Try to flush table class without supplying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tclass/",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 3,
                                        "bind": 2
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 5,
                                    "bind": 4
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 5,
                                    "bind": 4
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "778c",
        "name": "Create table class with key size > P4TC_MAX_KEYSZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 129 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "64ed",
        "name": "Create table class with key size = P4TC_MAX_KEYSZ",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 128 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tname": "cb/tname",
                        "keysz": 128,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 3,
                                    "bind": 2
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "508b",
        "name": "Create table class and update pipeline state",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update pipeline/ptables state ready",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get pipeline/ptables",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "pipeline"
            },
            {
                "templates": [
                    {
                        "pmaxrules": 1,
                        "pnumtclasses": 2,
                        "pstate": "ready",
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "index": 1,
                                    "ref": 2,
                                    "bind": 1,
                                    "control_action": {
                                        "type": "pass"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    }
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "drop"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 2,
                                    "ref": 2,
                                    "bind": 1
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ac1a",
        "name": "Create table class, update pipeline state and try to update pipeline after pipeline is sealed",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template update pipeline/ptables state ready",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update pipeline/ptables maxrules 2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get pipeline/ptables",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "pipeline"
            },
            {
                "templates": [
                    {
                        "pmaxrules": 1,
                        "pnumtclasses": 2,
                        "pstate": "ready",
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "index": 1,
                                    "ref": 2,
                                    "bind": 1,
                                    "control_action": {
                                        "type": "pass"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    }
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "drop"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 2,
                                    "ref": 2,
                                    "bind": 1
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "0fb8",
        "name": "Create table class, update pipeline state and try to update table class after pipelien is sealed",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template update pipeline/ptables state ready",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname2 keysz 32",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname2",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 42,
                        "tname": "cb/tname2",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 3,
                                        "bind": 2
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 5,
                                    "bind": 4
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 5,
                                    "bind": 4
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "32a6",
        "name": "Create table class with keys with more than one action",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 action gact index 4 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 42,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 3,
                                        "ref": 2,
                                        "bind": 1
                                    },
                                    {
                                        "order": 2,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "reclassify"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 4,
                                        "ref": 4,
                                        "bind": 3
                                    }
                                ]
                            }
                        ],
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 4,
                                    "bind": 3
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ade0",
        "name": "Update table class key with more than one action",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 5",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 action gact index 4 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keys id 1 action gact index 4 action gact index 5",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 42,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 1,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "reclassify"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 4,
                                        "ref": 4,
                                        "bind": 3
                                    },
                                    {
                                        "order": 2,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "drop"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 5,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 4,
                                    "bind": 3
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 4,
                                    "bind": 3
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "95f5",
        "name": "Update table class's keys",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 5",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keys id 1 action gact index 4 keys id 2 default action gact index 5",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "obj": "table class",
                "pname": "ptables",
                "pipeid": 22
            },
            {
                "templates": [
                    {
                        "tbcid": 42,
                        "tname": "cb/tname",
                        "keysz": 16,
                        "entries": 256,
                        "masks": 8,
                        "count": 1,
			"default_key": 2,
                        "keys": [
                            {
                                "id": 1,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "reclassify"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 4,
                                        "ref": 4,
                                        "bind": 3
                                    }
                                ]
                            },
                            {
                                "id": 2,
                                "actions": [
                                    {
                                        "order": 1,
                                        "kind": "gact",
                                        "control_action": {
                                            "type": "drop"
                                        },
                                        "prob": {
                                            "random_type": "none",
                                            "control_action": {
                                                "type": "pass"
                                            },
                                            "val": 0
                                        },
                                        "index": 5,
                                        "ref": 2,
                                        "bind": 1
                                    }
                                ]
                            }
                        ],
                        "preactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 4,
                                    "bind": 3
                                }
                            ]
                        },
                        "postactions": {
                            "actions": [
                                {
                                    "order": 1,
                                    "kind": "gact",
                                    "control_action": {
                                        "type": "reclassify"
                                    },
                                    "prob": {
                                        "random_type": "none",
                                        "control_action": {
                                            "type": "pass"
                                        },
                                        "val": 0
                                    },
                                    "index": 4,
                                    "ref": 4,
                                    "bind": 3
                                }
                            ]
                        }
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "aa0d",
        "name": "Update table class key with more than one action and check actions after",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 5",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 action gact index 4 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tclass/ptables/cb/tname keys id 1 action gact index 4 action gact index 5",
        "expExitCode": "0",
        "verifyCmd": "$TC -j actions ls action gact",
        "matchCount": "1",
        "matchJSON": [
            {
                "total acts": 5
            },
            {
                "actions": [
                    {
                        "kind": "gact",
                        "index": 1,
                        "ref": 2,
                        "bind": 1
                    },
                    {
                        "kind": "gact",
                        "index": 2,
                        "ref": 2,
                        "bind": 1
                    },
                    {
                        "kind": "gact",
                        "index": 3,
                        "ref": 1,
                        "bind": 0
                    },
                    {
                        "kind": "gact",
                        "index": 4,
                        "ref": 4,
                        "bind": 3
                    },
                    {
                        "kind": "gact",
                        "index": 5,
                        "ref": 2,
                        "bind": 1
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "e5e1",
        "name": "Dump table class using pipeline name to find pipeline",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 3 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname3 tbcid 50 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tname": "cb/tname"
                    },
                    {
                        "tname": "cb/tname2"
                    },
                    {
                        "tname": "cb/tname3"
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "7f04",
        "name": "Dump table class using pipeline id to find pipeline",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 3 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname3 tbcid 50 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ pipeid 22",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tname": "cb/tname"
                    },
                    {
                        "tname": "cb/tname2"
                    },
                    {
                        "tname": "cb/tname3"
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "96c5",
        "name": "Try to create more table class then numtclasses",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname3 tbcid 50 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tname": "cb/tname"
                    },
                    {
                        "tname": "cb/tname2"
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "e3fa",
        "name": "Try to dump table class without specifying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname3 tbcid 50 keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/",
        "matchCount": "1",
        "matchPattern": "Error: Must specify pipeline name or id.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6bcf",
        "name": "Dump pipeline with amount of table class > P4TC_MSGBATCH_SIZE",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action gact pass index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 17 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname3 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname4 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname5 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname6 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname7 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname8 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname9 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname10 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname11 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname12 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname13 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname14 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname15 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname16 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname17 tbcid 2147483647 keysz 16 keys action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tclass/ptables/",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tname": "cb/tname"
                    },
                    {
                        "tname": "cb/tname2"
                    },
                    {
                        "tname": "cb/tname3"
                    },
                    {
                        "tname": "cb/tname4"
                    },
                    {
                        "tname": "cb/tname5"
                    },
                    {
                        "tname": "cb/tname6"
                    },
                    {
                        "tname": "cb/tname7"
                    },
                    {
                        "tname": "cb/tname8"
                    },
                    {
                        "tname": "cb/tname9"
                    },
                    {
                        "tname": "cb/tname10"
                    },
                    {
                        "tname": "cb/tname11"
                    },
                    {
                        "tname": "cb/tname12"
                    },
                    {
                        "tname": "cb/tname13"
                    },
                    {
                        "tname": "cb/tname14"
                    },
                    {
                        "tname": "cb/tname15"
                    },
                    {
                        "tname": "cb/tname16"
                    }
                ]
            },
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table class"
            },
            {
                "templates": [
                    {
                        "tname": "cb/tname17"
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "2eb0",
        "name": "Try to create valid table class without control block name",
        "category": [
            "p4tc",
            "template",
            "tclass"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/tname keysz 16 tcount 1 keys id 1 action gact index 3 preactions gact index 4 postactions gact index 4",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tclass/ptables/cb/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table class name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    }
]
