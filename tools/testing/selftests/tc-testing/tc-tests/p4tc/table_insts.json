[
    {
        "id": "1098",
        "name": "Create valid table instance",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 27 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 27,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "518c",
        "name": "Try to create table instance without specifying maxentries",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8b12",
        "name": "Try to create table instance without specifying tiname",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname maxentries 32",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "13ae",
        "name": "Try to create table instances with same id twice",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 2 maxentries 32",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst2 tinstid 2 maxentries 24",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 2,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "dc92",
        "name": "Try to create table instance with id == INT_MAX",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 2147483647 maxentries 24",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst1",
                        "tbcid": 1,
                        "tiid": 2147483647
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a00c",
        "name": "Try to create table instance with maxentries > P4TC_MAX_TIENTRIES",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 513",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "dc9e",
        "name": "Try to create table instance with maxentries zero",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "fc66",
        "name": "Update maxentries by tiname with valid value",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "66b2",
        "name": "Update maxentries by tinstid with valid value",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/ tbcid 1 tinstid 42 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/ tbcid 1 tinstid 42",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8486",
        "name": "Update maxentries by pipeid and tinstid with valid value",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ pipeid 22 tbcid 1 tinstid 42 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/ tbcid 1 tinstid 42",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "bca1",
        "name": "Try to update maxentries without specifying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ tbcid 1 tinstid 42 maxentries 32",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/ tbcid 1 tinstid 42",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 256
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "9011",
        "name": "Update maxentries without specifying table class name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "0e34",
        "name": "Try to update maxentries by tinstid without specifying table class id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/ tinstid 42 maxentries 32",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 256
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "d495",
        "name": "Update maxentries by tiname and tcname with valid value",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 32",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 32
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "65c5",
        "name": "Check that creating table class with tcount 1 creates table instance of same name",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tname",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "a8ca",
        "name": "Try to update maxentries with zero",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 0",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 256
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b58d",
        "name": "Try to update with maxentries > P4TC_MAX_TIENTRIES",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 tinstid 42 maxentries 256",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 513",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 42,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 256
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "bd6b",
        "name": "Delete table instance by name",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/cb/tname/tname",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "f394",
        "name": "Delete table instance by tinstid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/ tbcid 1 tinstid 1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "f84e",
        "name": "Delete table instance specifying pipeid and tinstid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ pipeid 22 tbcid 1 tinstid 1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "1a7b",
        "name": "Try to delete table instance specifying tname and tinstid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/cb/tname/tname tinstid 1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "df05",
        "name": "Try to delete table instance by name without suplying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tname",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6c94",
        "name": "Try to delete table instance by tinstid without supplying tbcid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables tinstid 1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tname",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tname",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "889b",
        "name": "Try to delete inexistent table instance by name",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/cb/tname/tinst1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/",
        "matchCount": "1",
        "matchJSON": [],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "aa75",
        "name": "Try to delete inexistent table instance by id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/ tbcid 1 tinstid 1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/",
        "matchCount": "1",
        "matchJSON": [],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "d1ae",
        "name": "Try to create more table instances then specified in table class's tcount",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                477
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 1 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "3ce1",
        "name": "Flush table instances",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables/cb/tname/",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "cb63",
        "name": "Try to flush table instances without specifying pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ tbcid 1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 16
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6c46",
        "name": "Flush table instances specifying tbcid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ptables tbcid 1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ce24",
        "name": "Flush table instances specifying pipeid and tbcid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template del tinst/ pipeid 22 tbcid 1",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "fa3f",
        "name": "Dump table instances",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst1",
                        "tbcid": 1,
                        "tiid": 1
                    },
                    {
                        "tiname": "tinst2",
                        "tbcid": 1,
                        "tiid": 2
                    },
                    {
                        "tiname": "tinst3",
                        "tbcid": 1,
                        "tiid": 3
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "4193",
        "name": "Dump table instances specifying table class id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables tbcid 1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst1",
                        "tbcid": 1,
                        "tiid": 1
                    },
                    {
                        "tiname": "tinst2",
                        "tbcid": 1,
                        "tiid": 2
                    },
                    {
                        "tiname": "tinst3",
                        "tbcid": 1,
                        "tiid": 3
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "7078",
        "name": "Dump table instances specifying pipeid and tbcid",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ pipeid 22 tbcid 1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst1",
                        "tbcid": 1,
                        "tiid": 1
                    },
                    {
                        "tiname": "tinst2",
                        "tbcid": 1,
                        "tiid": 2
                    },
                    {
                        "tiname": "tinst3",
                        "tbcid": 1,
                        "tiid": 3
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "8afd",
        "name": "Try to dump table instances without specyfing table class name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 3 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ pipeid 22",
        "matchCount": "1",
        "matchPattern": "Error: Must specify table class name or id.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "25ab",
        "name": "Try to dump table instances without specyfing pipeline name or id",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 3 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/",
        "matchCount": "1",
        "matchPattern": "Error: Must specify pipeline name or id.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "cacc",
        "name": "Dump P4TC_MSGBATCH_SIZE + 1 table instances",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 17 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst4 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst5 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst6 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst7 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst8 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst9 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst10 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst11 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst12 maxentries 16",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst13 maxentries 8",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst14 maxentries 8",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst15 maxentries 8",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst16 maxentries 8",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst17 maxentries 8",
        "expExitCode": "0",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst1",
                        "tbcid": 1,
                        "tiid": 1
                    },
                    {
                        "tiname": "tinst2",
                        "tbcid": 1,
                        "tiid": 2
                    },
                    {
                        "tiname": "tinst3",
                        "tbcid": 1,
                        "tiid": 3
                    },
                    {
                        "tiname": "tinst4",
                        "tbcid": 1,
                        "tiid": 4
                    },
                    {
                        "tiname": "tinst5",
                        "tbcid": 1,
                        "tiid": 5
                    },
                    {
                        "tiname": "tinst6",
                        "tbcid": 1,
                        "tiid": 6
                    },
                    {
                        "tiname": "tinst7",
                        "tbcid": 1,
                        "tiid": 7
                    },
                    {
                        "tiname": "tinst8",
                        "tbcid": 1,
                        "tiid": 8
                    },
                    {
                        "tiname": "tinst9",
                        "tbcid": 1,
                        "tiid": 9
                    },
                    {
                        "tiname": "tinst10",
                        "tbcid": 1,
                        "tiid": 10
                    },
                    {
                        "tiname": "tinst11",
                        "tbcid": 1,
                        "tiid": 11
                    },
                    {
                        "tiname": "tinst12",
                        "tbcid": 1,
                        "tiid": 12
                    },
                    {
                        "tiname": "tinst13",
                        "tbcid": 1,
                        "tiid": 13
                    },
                    {
                        "tiname": "tinst14",
                        "tbcid": 1,
                        "tiid": 14
                    },
                    {
                        "tiname": "tinst15",
                        "tbcid": 1,
                        "tiid": 15
                    },
                    {
                        "tiname": "tinst16",
                        "tbcid": 1,
                        "tiid": 16
                    }
                ]
            },
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tiname": "tinst17",
                        "tbcid": 1,
                        "tiid": 17
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "d28f",
        "name": "Try to create table instance exceeding table class max entries",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 128",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 128",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst3",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ab6c",
        "name": "Try to update table instance exceeding table class max entries",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 128",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 128",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst2 maxentries 129",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst2",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 2,
                        "tbcname": "cb/tname",
                        "tiname": "tinst2",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "5128",
        "name": "Try to create table instance exceeding table class max entries after delete",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 128",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 128",
                0
            ],
            [
                "$TC p4template del tinst/ptables/cb/tname/tinst1",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 129",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst3",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "c5d3",
        "name": "Try to update table instance exceeding table class max entries after delete",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname keysz 16 tcount 3 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 64",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst2 maxentries 128",
                0
            ],
            [
                "$TC p4template del tinst/ptables/cb/tname/tinst1",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst3 maxentries 128",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst2 maxentries 129",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst2",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 1,
                        "tiid": 2,
                        "tbcname": "cb/tname",
                        "tiname": "tinst2",
                        "maxentries": 128
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "6163",
        "name": "Create table class, update pipeline state and try to create table instance",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template update pipeline/ptables state ready",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/",
        "matchCount": "1",
        "matchJSON": [],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "1786",
        "name": "Create table class, update pipeline state and try to update table instance",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 8",
                0
            ],
            [
                "$TC p4template update pipeline/ptables state ready",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template update tinst/ptables/cb/tname/tinst1 maxentries 2",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 8
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "2e28",
        "name": "Create table class, update pipeline state and try to delete table instance",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname2 tbcid 42 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ],
            [
                "$TC p4template create tinst/ptables/cb/tname/tinst1 maxentries 8",
                0
            ],
            [
                "$TC p4template update pipeline/ptables state ready",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template delete tinst/ptables/tinst1",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchJSON": [
            {
                "pname": "ptables",
                "pipeid": 22,
                "obj": "table instance"
            },
            {
                "templates": [
                    {
                        "tbcid": 22,
                        "tiid": 1,
                        "tbcname": "cb/tname",
                        "tiname": "tinst1",
                        "maxentries": 8
                    }
                ]
            }
        ],
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "ec22",
        "name": "Try to create table instance with name size > TINSTNAMSIZ",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/cb/tname/7eozFYyaqVCD7H0xS3M5sMnluUqPgZewfSLnYPf4s3k0lbx8lKoR32zSqiGsh84qJ32vnLPdl7f2XcUh5yIdEP7uJy2C3iPtyU7159s9CMB0EtTAlWTVz4U1jkQ5h2advwp3KCVsZ1jlGgStoJL2op5ZxoThTSUQLR61a5RNDovoSFcq86Brh6oW9DSmTbN6SYygbG3JLnEHzRC5hh0jGmJKHq5ivBK9Y9FlNZQXC9wVwX4qTFAd8ITUTj2Au2Jg1 maxentries 12",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/7eozFYyaqVCD7H0xS3M5sMnluUqPgZewfSLnYPf4s3k0lbx8lKoR32zSqiGsh84qJ32vnLPdl7f2XcUh5yIdEP7uJy2C3iPtyU7159s9CMB0EtTAlWTVz4U1jkQ5h2advwp3KCVsZ1jlGgStoJL2op5ZxoThTSUQLR61a5RNDovoSFcq86Brh6oW9DSmTbN6SYygbG3JLnEHzRC5hh0jGmJKHq5ivBK9Y9FlNZQXC9wVwX4qTFAd8ITUTj2Au2Jg1",
        "matchCount": "1",
        "matchPattern": "Error: Attribute failed policy validation.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    },
    {
        "id": "b1fc",
        "name": "Try to create table instance with table class name size > TCLASSNAMSIZ",
        "category": [
            "p4tc",
            "template",
            "tinst"
        ],
        "setup": [
            [
                "$TC p4template del pipeline/ptables",
                0,
                1,
                255
            ],
            [
                "$TC actions flush action gact",
                0,
                1,
                255
            ],
            [
                "$TC actions add action pass index 1",
                0,
                1,
                255
            ],
            [
                "$TC actions add action drop index 2",
                0,
                1,
                255
            ],
            [
                "$TC actions add action ok index 3",
                0,
                1,
                255
            ],
            [
                "$TC actions add action reclassify index 4",
                0,
                1,
                255
            ],
            [
                "$TC p4template create pipeline/ptables pipeid 22 maxrules 1 numtclasses 2 preactions action gact index 1 postactions action gact index 2",
                0
            ],
            [
                "$TC p4template create tclass/ptables/cb/tname tbcid 22 keysz 16 tcount 2 keys id 1 action gact index 3 postactions gact index 4",
                0
            ]
        ],
        "cmdUnderTest": "$TC p4template create tinst/ptables/7eozFYyaqVCD7H0xS3M5sMnluUqPgZewfSLnYPf4s3k0lbx8lKoR32zSqiGsh84qJ32vnLPdl7f2XcUh5yIdEP7uJy2C3iPtyU7159s9CMB0EtTAlWTVz4U1jkQ5h2advwp3KCVsZ1jlGgStoJL2op5ZxoThTSUQLR61a5RNDovoSFcq86Brh6oW9DSmTbN6SYygbG3JLnEHzRC5hh0jGmJKHq5ivBK9Y9FlNZQXC9wVwX4qTFAd8ITUTj2Au2Jg1/tinst1 maxentries 12",
        "expExitCode": "255",
        "verifyCmd": "$TC -j p4template get tinst/ptables/cb/tname/tinst1",
        "matchCount": "1",
        "matchPattern": "Error: Table instance name not found.*",
        "teardown": [
            [
                "$TC p4template del pipeline/ptables",
                0
            ],
            [
                "$TC actions flush action gact",
                0
            ]
        ]
    }
]
